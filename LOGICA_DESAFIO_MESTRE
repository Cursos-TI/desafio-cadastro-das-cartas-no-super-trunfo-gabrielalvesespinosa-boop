#include <stdio.h>
#include <string.h>

// Estrutura da carta
typedef struct {
    char estado[30];
    char codigo[10];
    char nome[50];
    unsigned long int populacao;
    float area;
    float pib;
    int pontosTuristicos;
    float densidadeDemografica;
    float pibPerCapita;
} Carta;

// Função para calcular atributos derivados
void calcularAtributos(Carta *c) {
    c->densidadeDemografica = c->populacao / c->area;
    c->pibPerCapita = c->pib / c->populacao;
}

// Função para exibir informações básicas da carta
void exibirCarta(Carta c) {
    printf("\n--- Carta %s ---\n", c.codigo);
    printf("Estado: %s\n", c.estado);
    printf("Cidade: %s\n", c.nome);
    printf("População: %lu\n", c.populacao);
    printf("Área: %.2f km²\n", c.area);
    printf("PIB: %.2f bilhões\n", c.pib);
    printf("Pontos Turísticos: %d\n", c.pontosTuristicos);
    printf("Densidade Demográfica: %.2f hab/km²\n", c.densidadeDemografica);
    printf("PIB per Capita: %.2f\n", c.pibPerCapita);
}

// Função para obter o valor de um atributo (para comparação)
float obterValor(Carta c, int atributo) {
    switch (atributo) {
        case 1: return (float)c.populacao;
        case 2: return c.area;
        case 3: return c.pib;
        case 4: return (float)c.pontosTuristicos;
        case 5: return c.densidadeDemografica;
        case 6: return c.pibPerCapita;
        default: return -1;
    }
}

// Função para exibir o nome do atributo
const char* nomeAtributo(int atributo) {
    switch (atributo) {
        case 1: return "População";
        case 2: return "Área";
        case 3: return "PIB";
        case 4: return "Pontos Turísticos";
        case 5: return "Densidade Demográfica";
        case 6: return "PIB per Capita";
        default: return "Desconhecido";
    }
}

int main() {
    // Definição de duas cartas pré-cadastradas
    Carta carta1 = {"São Paulo", "C1", "São Paulo", 12300000, 1521.11, 699.28, 50};
    Carta carta2 = {"Rio de Janeiro", "C2", "Rio de Janeiro", 6748000, 1182.30, 407.12, 40};

    // Calcular atributos derivados
    calcularAtributos(&carta1);
    calcularAtributos(&carta2);

    // Exibir cartas
    printf("\n===== SUPER TRUNFO - Nível Mestre =====\n");
    exibirCarta(carta1);
    exibirCarta(carta2);

    // Menu para escolha dos atributos
    int escolha1, escolha2;

    printf("\nEscolha o primeiro atributo para comparação:\n");
    printf("1 - População\n2 - Área\n3 - PIB\n4 - Pontos Turísticos\n5 - Densidade Demográfica\n6 - PIB per Capita\n");
    scanf("%d", &escolha1);

    printf("\nEscolha o segundo atributo (diferente do primeiro):\n");
    for (int i = 1; i <= 6; i++) {
        if (i != escolha1) {
            printf("%d - %s\n", i, nomeAtributo(i));
        }
    }
    scanf("%d", &escolha2);

    // Garantir que não sejam iguais
    if (escolha1 == escolha2) {
        printf("\nErro: Você não pode escolher o mesmo atributo duas vezes!\n");
        return 0;
    }

    // Obter valores
    float valor1_attr1 = obterValor(carta1, escolha1);
    float valor2_attr1 = obterValor(carta2, escolha1);
    float valor1_attr2 = obterValor(carta1, escolha2);
    float valor2_attr2 = obterValor(carta2, escolha2);

    // Comparação individual
    int resultado1, resultado2;
    resultado1 = (escolha1 == 5) ? (valor1_attr1 < valor2_attr1) : (valor1_attr1 > valor2_attr1);
    resultado2 = (escolha2 == 5) ? (valor1_attr2 < valor2_attr2) : (valor1_attr2 > valor2_attr2);

    // Soma dos atributos (ajuste para regra da densidade)
    float soma1 = (escolha1 == 5 ? -valor1_attr1 : valor1_attr1) + (escolha2 == 5 ? -valor1_attr2 : valor1_attr2);
    float soma2 = (escolha1 == 5 ? -valor2_attr1 : valor2_attr1) + (escolha2 == 5 ? -valor2_attr2 : valor2_attr2);

    // Exibir resultados
    printf("\n===== RESULTADOS =====\n");

    printf("\nComparação 1 - %s:\n", nomeAtributo(escolha1));
    printf("%s: %.2f\n", carta1.nome, valor1_attr1);
    printf("%s: %.2f\n", carta2.nome, valor2_attr1);
    printf("Vencedor: %s\n", resultado1 ? carta1.nome : carta2.nome);

    printf("\nComparação 2 - %s:\n", nomeAtributo(escolha2));
    printf("%s: %.2f\n", carta1.nome, valor1_attr2);
    printf("%s: %.2f\n", carta2.nome, valor2_attr2);
    printf("Vencedor: %s\n", resultado2 ? carta1.nome : carta2.nome);

    printf("\nSoma dos atributos:\n");
    printf("%s: %.2f\n", carta1.nome, soma1);
    printf("%s: %.2f\n", carta2.nome, soma2);

    if (soma1 > soma2) {
        printf("\nResultado Final: %s venceu!\n", carta1.nome);
    } else if (soma2 > soma1) {
        printf("\nResultado Final: %s venceu!\n", carta2.nome);
    } else {
        printf("\nResultado Final: Empate!\n");
    }

    return 0;
}
